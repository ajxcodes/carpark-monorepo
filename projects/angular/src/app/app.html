<!-- src/app/app.component.html -->

<main class="container">
  <!-- The new component for displaying the car park status -->
  <app-spaces-status></app-spaces-status>

  <div class="grid">
    <!-- The new component for parking a vehicle.
         We listen for its output events to handle success and errors. -->
    <app-park-vehicle (vehicleParked)="onVehicleParked($event)" (parkError)="onError($event)"></app-park-vehicle>
    
    <!-- The new component for exiting a vehicle.
         We listen for its output events as well. -->
    <app-exit-vehicle (vehicleExited)="onVehicleExited($event)" (exitError)="onError($event)"></app-exit-vehicle>
  </div>

  <section class="results">
    @if (parkingResult) {
      <article>
        <h3>Vehicle Parked Successfully</h3>
        <p>Registration: {{ parkingResult.vehicleReg }}</p>
        <p>Space Number: {{ parkingResult.spaceNumber }}</p>
        <p>Time In: {{ parkingResult.timeIn | date:'short' }}</p>
      </article>
    }
    @if (exitResult) {
      <article>
        <h3>Vehicle Exited Successfully</h3>
        <p>Registration: {{ exitResult.vehicleReg }}</p>
        <p>Charge: {{ exitResult.vehicleCharge | currency:'GBP' }}</p>
        <p>Time Out: {{ exitResult.timeOut | date:'short' }}</p>
      </article>
    }
    @if (apiError) {
      <article class="error-card">
        <h3>An Error Occurred</h3>
        <p>{{ apiError }}</p>
      </article>
    }
  </section>

  <!-- This is where your routed components will be displayed -->
  <router-outlet></router-outlet>
</main>
